<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
	<title>3.3. Настройка клавиатуры (раскладки) и шрифта в TTY</title>
</head>
<link rel="stylesheet" href="../../styles.css">
<body style="margin: 0px 150px 0px 150px">

<table summary="Header navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<th colspan="3" align="center">Настройка Calmira GNU/Linux</th>
</tr>

<table summary="Footer navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="clock.html"
accesskey="P">Назад</a></td>
<td width="34%" align="center" valign="top"><a href="index.html"
accesskey="H">Домой</a></td>
<td width="33%" align="right" valign="top"><a href="inittab.html"
accesskey="N">Далее</a></td>

</tr>

<tr>
<td width="33%" align="left" valign="top">Настройка часов</td>
<td width="34%" align="center" valign="top">&nbsp;</td>
<td width="33%" align="right" valign="top">Настройка inittab</td>
</tr>
</table>

<hr align="LEFT" width="100%" />

<h1>3.3. Настройка клавиатуры (раскладки) и шрифта в TTY</h1>

<p>Дистрибутив Calmira GNU/Linux предназначен для работы в TTY в первую очередь. Некоторым пользователям может понадобиться переключение раскладки клавиатуры с английской на свою родную. В системе Calmira уже предустановлен нужный софт для настройки раскладок.</p>

<h2>3.3.1. Файлы</h2>

<p>Настройка раскладок производится в файле <em><tt>/etc/sysconfig/console</tt></em>.</p>

<p>Раскладки клавиатуры содержатся в директории <em><tt>/usr/share/keymaps</tt></em>. Шрифты в <em><tt>/usr/share/consolefonts</tt></em>.</p>

<h2>3.3.2. Параметры в конфигурационном файле</h2>

<p>См. предыдущий пункт.</p>

<ul>
	<li><em><tt>UNICODE</tt></em> - при значении 1, yes или true переводит консоль в режим UTF-8, что важно для некоторых раскладок и шрифтов, например, русских.</li>
	<li><em><tt>KEYMAP</tt></em> содержит аргументы для программы loadkeys, которая загружает раскладки клавиатуры. Значение этого параметра - имя загружаемой раскладки.</li>
	<li><em><tt>FONT</tt></em> - имя шрифта консоли. Содержит аргументы для программы setfont. Значение этого параметра - имя загружаемого шрифта.</li>
</ul>

<h2>3.3.3. Установка раскладки клавиатуры</h2>

<p>Для поиска нужной раскладки выполнить:</p>

<table border="1" width="100%" cellpadding="5"><colgroup>
	<col style="background-color:#eeddcc">
</colgroup>
<tr><td>
<pre>
find /usr/share/keymaps --type f
</pre></td></tr></table>

<p>Выберите нужную раскладку. Например, для русской qwerty-раскладки, это будут варианты:</p>

<ol>
	<li><em><tt>ru</tt></em> - переключение раскладки не установлено автором (либо же вовсе отсутствует).</li>
	<li><em><tt>ruwin_alt_sh-UTF-8</tt></em> - переключение раскладки по Alt+Shift.</li>
	<li><em><tt>ruwin_cplk-UTF-8</tt></em> - переключение раскладки по Caps Lock.</li>
	<li><em><tt>ruwin-ct_sh-UTF-8</tt></em> - переключение раскладки по Ctrl+Shift.</li>
</ol>

<p>Как вы могли заметить, значение раскладки берётся из вывода предыдущей команды, но без расширения на конце и полного пути. Подставьте полученный результат как значение переменной <tt>KEYMAP</tt>, например:</p>

<table border="1" width="100%" cellpadding="5"><colgroup>
	<col style="background-color:#eeddcc">
</colgroup>
<tr><td>
<pre>
KEYMAP="ruwin_alt_sh-UTF-8"
</pre></td></tr></table>

<h2>3.3.4. Установка шрифта</h2>

<p>Для корректного отображения символов в родной для пользователя локализации (в т.ч. и для смысла настройки раскладок клавиатуры) нужно установить шрифт, поддерживающий эту локализацию.</p>

<p>Для просмотра всех установленных раскладок клавиатуры выполните:</p>

<table border="1" width="100%" cellpadding="5"><colgroup>
	<col style="background-color:#eeddcc">
</colgroup>
<tr><td>
<pre>
ls /usr/share/consolefonts
</pre></td></tr></table>

<p>Из списка выберите нужный шрифт. Например, для корректного отображения кириллицы и латиницы неплохо подходит шрифт <em>cyr-sun16</em>. Подставьте нужное значение в переменную <tt>FONT</tt>, например:</p>

<table border="1" width="100%" cellpadding="5"><colgroup>
	<col style="background-color:#eeddcc">
</colgroup>
<tr><td>
<pre>
FONT="cyr-sun16"
</pre></td></tr></table>

<h2>3.3.5. Пример готового конфигурационного файла</h2>

<table border="1" width="100%" cellpadding="5">
<tr><td>
<pre>
# Begin /etc/sysconfig/console

UNICODE="1"
KEYMAP="ruwin_alt_sh-UTF-8"
FONT="cyr-sun16"

# End /etc/sysconfig/console
</pre></td></tr></table>

<hr align="LEFT" width="100%" />

<table summary="Footer navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="clock.html"
accesskey="P">Назад</a></td>
<td width="34%" align="center" valign="top"><a href="index.html"
accesskey="H">Домой</a></td>
<td width="33%" align="right" valign="top"><a href="inittab.html"
accesskey="N">Далее</a></td>

</tr>

<tr>
<td width="33%" align="left" valign="top">Настройка часов</td>
<td width="34%" align="center" valign="top">&nbsp;</td>
<td width="33%" align="right" valign="top">Настройка inittab</td>
</tr>
</table><br>
</body></html>
